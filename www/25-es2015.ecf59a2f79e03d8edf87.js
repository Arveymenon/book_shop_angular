(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{Em4V:function(l,n,u){"use strict";u.r(n);var t=u("8Y7J");class o{}var e=u("pMnS"),r=u("oBZk"),s=u("ZZ/e"),i=u("SVse"),a=u("mrSG"),c=u("esXn"),b=u("A1Tq"),d=u("9ZKQ"),h=u("s7LF"),g=u("wd/R"),f=u("7Siz");class p{constructor(l,n,u,t){this.storage=l,this.http=n,this.modalctrl=u,this.modalController=t,this.addresses=[],this.today=new Date,this.selectedAddress=new h.c("",h.p.required),this.moment=g}ngOnInit(){console.log(g(this.today).add(1,"d").format("L")),this.storage.get("user").then(l=>{console.log(l),this.http.call("get","api/address/"+l.id).then(l=>{console.log(l),0==l.error&&(this.addresses=l.response)})})}addAddress(){return a.b(this,void 0,void 0,(function*(){const l=yield this.modalController.create({component:f.a});return l.onDidDismiss().then(()=>{this.ngOnInit()}),yield l.present()}))}confirm(){this.selectedAddress.valid&&this.modalctrl.dismiss(this.selectedAddress.value)}}class k{constructor(l,n,u,t,o,e,r,s){this.router=l,this.cartService=n,this.route=u,this.http=t,this.storage=o,this.toast=e,this.location=r,this.modalController=s,this.books=[],this.math=Math,this.total=0,this.resaleTotal=0,this.order={},this.moment=g,this.resaleBooks=[],this.resaleActive=!1}ngOnInit(){this.storage.remove("cart"),this.route.paramMap.subscribe(l=>{console.log(l),this.http.call("get","api/order/details/"+l.params.id).then(l=>{if(console.log(l),0==l.error&&(this.order=l.response,l.response.details.forEach(l=>{console.log(l),this.resaleBooks.push({order_details_id:l.id,quantity:0})}),2==l.response.status))if(0==l.response.resale_order.length)this.resaleActive=!0;else{const n=l.response.resale_order[l.response.resale_order.length-1].status;2!=n&&5!=n||(this.resaleActive=!0)}})}),this.cartService.getBooks().then(l=>{this.books=l,console.log(this.books)})}requestResale(){return a.b(this,void 0,void 0,(function*(){const l=yield this.modalController.create({component:p});return l.onDidDismiss().then(l=>{console.log(l);const n=JSON.stringify({order_id:this.order.id,address_id:l.data,details:this.resaleBooks});console.log(n),this.http.call("post","api/resale/post",n).then(l=>{console.log(l),0==l.error?(this.toast.show("Resale Request Sent Successfully"),this.location.back()):this.toast.show("Some Error Occured")})}),yield l.present()}))}details(){this.router.navigate(["order_details"])}addToCart(l){console.log("add",l),this.order.details[l].quantity>this.resaleBooks[l].quantity?(this.resaleBooks[l].quantity+=1,this.calculate()):this.toast.show("Cannot Add Books More Than You Bought In This Order")}removeFromCart(l){console.log("remove",l),console.log(this.resaleBooks),this.resaleBooks[l].quantity-=1,this.calculate()}calculate(){this.resaleTotal=0;for(const l in this.resaleBooks)if(0!=this.resaleBooks[l].quantity){console.log(parseInt(this.order.details[l].book.mrp_in_rupees)),console.log(this.resaleBooks[l].quantity);const n=0==this.order.details[l].refurbished?parseInt(this.order.details[l].book.mrp_in_rupees):.8*parseInt(this.order.details[l].book.mrp_in_rupees);this.resaleTotal=this.resaleTotal+.6*n*this.resaleBooks[l].quantity,console.log(this.resaleTotal)}}}var m=u("iInd"),x=u("xgBC"),_=t.pb({encapsulation:0,styles:[[".book_card[_ngcontent-%COMP%]{border-radius:20px}.book_card[_ngcontent-%COMP%]   .refurbished_flag[_ngcontent-%COMP%]{float:right;padding-right:5px}.book_card[_ngcontent-%COMP%]   .books_refurbished_checkbox[_ngcontent-%COMP%]{float:right}.book_card[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{width:100%;text-align:center;float:right}.book_card[_ngcontent-%COMP%]   .full_controls[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;flex-direction:row-reverse;margin-top:10px}.book_card[_ngcontent-%COMP%]   .add_to_cart_button[_ngcontent-%COMP%]{background:#ff9b24ba;padding:10px;color:#fff;font-weight:900;box-shadow:0 1px 6px 0 #7b7b7b;border-radius:16px}.book_card[_ngcontent-%COMP%]   .product_in_cart[_ngcontent-%COMP%]{width:33%;margin:auto;font-size:1.6em}.book_card[_ngcontent-%COMP%]   .plus_minus_button[_ngcontent-%COMP%]{width:33%;padding:2px;color:#fff;font-weight:700;font-size:1.9em;border-radius:31px;background:#ff9b24ba}.footer[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{text-align:center;font-size:1.2em;margin:auto}.footer[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{text-align:center}.footer[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .order_details[_ngcontent-%COMP%]{background:#ff9b24ba;padding:10px;color:#fff;font-weight:900;box-shadow:0 1px 6px 0 #7b7b7b;border-radius:16px}"]],data:{}});function q(l){return t.Jb(0,[(l()(),t.rb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t.rb(1,0,null,null,1,"p",[["class","no-margin refurbished_flag"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Refurbished"]))],null,null)}function v(l){return t.Jb(0,[(l()(),t.rb(0,0,null,null,2,"div",[["class","controls"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.addToCart(l.parent.context.index)&&t),t}),null,null)),(l()(),t.rb(1,0,null,null,1,"p",[["class","add_to_cart_button"],["onclick","this.style='box-shadow: none'"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Add To Cart"]))],null,null)}function C(l){return t.Jb(0,[(l()(),t.rb(0,0,null,null,6,"div",[["class","controls full_controls"]],null,null,null,null,null)),(l()(),t.rb(1,0,null,null,1,"div",[["class","plus_minus_button"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.addToCart(l.parent.context.index)&&t),t}),null,null)),(l()(),t.Ib(-1,null,["+"])),(l()(),t.rb(3,0,null,null,1,"div",[["class","product_in_cart"]],null,null,null,null,null)),(l()(),t.Ib(4,null,["",""])),(l()(),t.rb(5,0,null,null,1,"div",[["class","plus_minus_button"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.removeFromCart(l.parent.context.index)&&t),t}),null,null)),(l()(),t.Ib(-1,null,["-"]))],null,(function(l,n){l(n,4,0,n.component.resaleBooks[n.parent.context.index].quantity)}))}function B(l){return t.Jb(0,[(l()(),t.rb(0,0,null,null,25,"ion-card",[["class","book_card"]],null,null,null,r.B,r.d)),t.qb(1,49152,null,0,s.n,[t.h,t.k,t.x],null,null),(l()(),t.rb(2,0,null,0,23,"ion-grid",[],null,null,null,r.G,r.i)),t.qb(3,49152,null,0,s.B,[t.h,t.k,t.x],null,null),(l()(),t.rb(4,0,null,0,21,"ion-row",[],null,null,null,r.Q,r.s)),t.qb(5,49152,null,0,s.kb,[t.h,t.k,t.x],null,null),(l()(),t.rb(6,0,null,0,2,"ion-col",[["size","3"]],null,null,null,r.D,r.f)),t.qb(7,49152,null,0,s.u,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.rb(8,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(l()(),t.rb(9,0,null,0,7,"ion-col",[["size","5"]],null,null,null,r.D,r.f)),t.qb(10,49152,null,0,s.u,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.rb(11,0,null,0,1,"b",[],null,null,null,null,null)),(l()(),t.Ib(12,null,["",""])),(l()(),t.rb(13,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),t.Ib(14,0,[" ",""])),(l()(),t.rb(15,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),t.Ib(16,0,[" Price: "," \u20b9 "])),(l()(),t.rb(17,0,null,0,8,"ion-col",[["size","4"]],null,null,null,r.D,r.f)),t.qb(18,49152,null,0,s.u,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.rb(19,0,null,0,6,"div",[],null,null,null,null,null)),(l()(),t.gb(16777216,null,null,1,null,q)),t.qb(21,16384,null,0,i.i,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,null,1,null,v)),t.qb(23,16384,null,0,i.i,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,null,1,null,C)),t.qb(25,16384,null,0,i.i,[t.M,t.J],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,7,0,"3"),l(n,10,0,"5"),l(n,18,0,"4"),l(n,21,0,1==n.context.$implicit.refurbished),l(n,23,0,0==u.resaleBooks[n.context.index].quantity&&1==u.resaleActive),l(n,25,0,0!=u.resaleBooks[n.context.index].quantity)}),(function(l,n){var u=n.component;l(n,8,0,t.vb(1,"https://elasticbeanstalk-us-east-2-743144358023.s3.us-east-2.amazonaws.com/",n.context.$implicit.book.image,"")),l(n,12,0,n.context.$implicit.book.name),l(n,14,0,n.context.$implicit.book.board.name),l(n,16,0,n.context.$implicit.refurbished?u.math.round(.8*n.context.$implicit.book.mrp_in_rupees):n.context.$implicit.book.mrp_in_rupees)}))}function I(l){return t.Jb(0,[(l()(),t.rb(0,0,null,null,2,"ion-col",[["class","total"]],null,null,null,r.D,r.f)),t.qb(1,49152,null,0,s.u,[t.h,t.k,t.x],null,null),(l()(),t.Ib(2,0,[" Total: "," \u20b9 "]))],null,(function(l,n){l(n,2,0,n.component.order.particular[0].amount)}))}function M(l){return t.Jb(0,[(l()(),t.rb(0,0,null,null,4,"ion-col",[["class","ion-text-center"]],null,null,null,r.D,r.f)),t.qb(1,49152,null,0,s.u,[t.h,t.k,t.x],null,null),(l()(),t.Ib(-1,0,[" Expected Resale"])),(l()(),t.rb(3,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),t.Ib(4,0,[" Pick Up Date: "," "]))],null,(function(l,n){var u=n.component;l(n,4,0,u.moment(u.order.resale_order[u.order.resale_order.length-1].created_at).add(1,"d").format("L"))}))}function O(l){return t.Jb(0,[(l()(),t.rb(0,0,null,null,8,"div",[["class","footer"]],null,null,null,null,null)),(l()(),t.rb(1,0,null,null,7,"ion-grid",[],null,null,null,r.G,r.i)),t.qb(2,49152,null,0,s.B,[t.h,t.k,t.x],null,null),(l()(),t.rb(3,0,null,0,5,"ion-row",[],null,null,null,r.Q,r.s)),t.qb(4,49152,null,0,s.kb,[t.h,t.k,t.x],null,null),(l()(),t.gb(16777216,null,0,1,null,I)),t.qb(6,16384,null,0,i.i,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,0,1,null,M)),t.qb(8,16384,null,0,i.i,[t.M,t.J],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,6,0,u.order.particular),l(n,8,0,0==u.resaleActive&&u.order.resale_order)}),null)}function P(l){return t.Jb(0,[(l()(),t.rb(0,0,null,null,14,"div",[["class","footer"]],null,null,null,null,null)),(l()(),t.rb(1,0,null,null,13,"ion-grid",[],null,null,null,r.G,r.i)),t.qb(2,49152,null,0,s.B,[t.h,t.k,t.x],null,null),(l()(),t.rb(3,0,null,0,11,"ion-row",[],null,null,null,r.Q,r.s)),t.qb(4,49152,null,0,s.kb,[t.h,t.k,t.x],null,null),(l()(),t.rb(5,0,null,0,4,"ion-col",[["class","total"]],null,null,null,r.D,r.f)),t.qb(6,49152,null,0,s.u,[t.h,t.k,t.x],null,null),(l()(),t.Ib(-1,0,[" Estimated Resale Value:"])),(l()(),t.rb(8,0,null,0,0,"br",[],null,null,null,null,null)),(l()(),t.Ib(9,0,[" "," \u20b9 "])),(l()(),t.rb(10,0,null,0,4,"ion-col",[],null,null,null,r.D,r.f)),t.qb(11,49152,null,0,s.u,[t.h,t.k,t.x],null,null),(l()(),t.rb(12,0,null,0,2,"div",[["class","controls"]],null,null,null,null,null)),(l()(),t.rb(13,0,null,null,1,"p",[["class","order_details"],["onclick","this.style='box-shadow: none'"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.requestResale()&&t),t}),null,null)),(l()(),t.Ib(-1,null,["Request Resale"]))],null,(function(l,n){l(n,9,0,n.component.resaleTotal)}))}function w(l){return t.Jb(0,[(l()(),t.rb(0,0,null,null,6,"ion-header",[],null,null,null,r.H,r.j)),t.qb(1,49152,null,0,s.C,[t.h,t.k,t.x],null,null),(l()(),t.rb(2,0,null,0,4,"ion-toolbar",[],null,null,null,r.V,r.x)),t.qb(3,49152,null,0,s.Db,[t.h,t.k,t.x],null,null),(l()(),t.rb(4,0,null,0,2,"ion-title",[],null,null,null,r.U,r.w)),t.qb(5,49152,null,0,s.Bb,[t.h,t.k,t.x],null,null),(l()(),t.Ib(-1,0,["Order Details"])),(l()(),t.rb(7,0,null,null,3,"ion-content",[],null,null,null,r.E,r.g)),t.qb(8,49152,null,0,s.v,[t.h,t.k,t.x],null,null),(l()(),t.gb(16777216,null,0,1,null,B)),t.qb(10,278528,null,0,i.h,[t.M,t.J,t.q],{ngForOf:[0,"ngForOf"]},null),(l()(),t.rb(11,0,null,null,5,"ion-footer",[],null,null,null,r.F,r.h)),t.qb(12,49152,null,0,s.A,[t.h,t.k,t.x],null,null),(l()(),t.gb(16777216,null,0,1,null,O)),t.qb(14,16384,null,0,i.i,[t.M,t.J],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,0,1,null,P)),t.qb(16,16384,null,0,i.i,[t.M,t.J],{ngIf:[0,"ngIf"]},null)],(function(l,n){var u=n.component;l(n,10,0,u.order.details),l(n,14,0,0==u.resaleTotal),l(n,16,0,0!=u.resaleTotal)}),null)}function y(l){return t.Jb(0,[(l()(),t.rb(0,0,null,null,1,"app-order-details",[],null,null,null,w,_)),t.qb(1,114688,null,0,k,[m.m,c.a,m.a,b.a,x.b,d.a,i.f,s.Jb],null,null)],(function(l,n){l(n,1,0)}),null)}var J=t.nb("app-order-details",k,y,{},{},[]),D=u("iN1W"),z=t.pb({encapsulation:0,styles:[[".footer[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{text-align:center;font-size:1.2em;margin:auto}.footer[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{text-align:center}.footer[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .order_details[_ngcontent-%COMP%]{background:var(--ion-color-primary);padding:10px;color:#fff;font-weight:900;box-shadow:0 1px 6px 0 #7b7b7b}"]],data:{}});function A(l){return t.Jb(0,[(l()(),t.rb(0,0,null,null,2,"ion-select-option",[],null,null,null,r.R,r.u)),t.qb(1,49152,null,0,s.pb,[t.h,t.k,t.x],{value:[0,"value"]},null),(l()(),t.Ib(2,0,["",""]))],(function(l,n){l(n,1,0,n.context.$implicit.id)}),(function(l,n){l(n,2,0,n.context.$implicit.address)}))}function T(l){return t.Jb(0,[(l()(),t.rb(0,0,null,null,18,"ion-content",[],null,null,null,r.E,r.g)),t.qb(1,49152,null,0,s.v,[t.h,t.k,t.x],null,null),(l()(),t.rb(2,0,null,0,13,"ion-item",[["class","vertically-center"]],null,null,null,r.K,r.m)),t.qb(3,49152,null,0,s.I,[t.h,t.k,t.x],null,null),(l()(),t.rb(4,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,r.L,r.n)),t.qb(5,49152,null,0,s.O,[t.h,t.k,t.x],{position:[0,"position"]},null),(l()(),t.Ib(-1,0,["Select Your Address"])),(l()(),t.rb(7,0,null,0,8,"ion-select",[["interface","action-sheet"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],(function(l,n,u){var o=!0;return"ionBlur"===n&&(o=!1!==t.Db(l,8)._handleBlurEvent(u.target)&&o),"ionChange"===n&&(o=!1!==t.Db(l,8)._handleChangeEvent(u.target)&&o),o}),r.S,r.t)),t.qb(8,16384,null,0,s.Pb,[t.k],null,null),t.Fb(1024,null,h.i,(function(l){return[l]}),[s.Pb]),t.qb(10,540672,null,0,h.d,[[8,null],[8,null],[6,h.i],[2,h.s]],{form:[0,"form"]},null),t.Fb(2048,null,h.j,null,[h.d]),t.qb(12,16384,null,0,h.k,[[4,h.j]],null,null),t.qb(13,49152,null,0,s.ob,[t.h,t.k,t.x],{interface:[0,"interface"]},null),(l()(),t.gb(16777216,null,0,1,null,A)),t.qb(15,278528,null,0,i.h,[t.M,t.J,t.q],{ngForOf:[0,"ngForOf"]},null),(l()(),t.rb(16,0,null,0,2,"ion-button",[["expand","block"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.addAddress()&&t),t}),r.z,r.b)),t.qb(17,49152,null,0,s.l,[t.h,t.k,t.x],{expand:[0,"expand"]},null),(l()(),t.Ib(-1,0,["Add New Address"])),(l()(),t.rb(19,0,null,null,14,"ion-footer",[],null,null,null,r.F,r.h)),t.qb(20,49152,null,0,s.A,[t.h,t.k,t.x],null,null),(l()(),t.rb(21,0,null,0,12,"div",[["class","footer"]],null,null,null,null,null)),(l()(),t.rb(22,0,null,null,11,"ion-grid",[],null,null,null,r.G,r.i)),t.qb(23,49152,null,0,s.B,[t.h,t.k,t.x],null,null),(l()(),t.rb(24,0,null,0,9,"ion-row",[],null,null,null,r.Q,r.s)),t.qb(25,49152,null,0,s.kb,[t.h,t.k,t.x],null,null),(l()(),t.rb(26,0,null,0,2,"ion-col",[["class","total"],["size","6"]],null,null,null,r.D,r.f)),t.qb(27,49152,null,0,s.u,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.Ib(28,0,[" Expected Pick Up Date: "," "])),(l()(),t.rb(29,0,null,0,4,"ion-col",[["size","6"]],null,null,null,r.D,r.f)),t.qb(30,49152,null,0,s.u,[t.h,t.k,t.x],{size:[0,"size"]},null),(l()(),t.rb(31,0,null,0,2,"div",[["class","controls"]],null,[[null,"click"]],(function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.confirm()&&t),t}),null,null)),(l()(),t.rb(32,0,null,null,1,"p",[["class","order_details"]],null,null,null,null,null)),(l()(),t.Ib(-1,null,["Confirm Address"]))],(function(l,n){var u=n.component;l(n,5,0,"floating"),l(n,10,0,u.selectedAddress),l(n,13,0,"action-sheet"),l(n,15,0,u.addresses),l(n,17,0,"block"),l(n,27,0,"6"),l(n,30,0,"6")}),(function(l,n){var u=n.component;l(n,7,0,t.Db(n,12).ngClassUntouched,t.Db(n,12).ngClassTouched,t.Db(n,12).ngClassPristine,t.Db(n,12).ngClassDirty,t.Db(n,12).ngClassValid,t.Db(n,12).ngClassInvalid,t.Db(n,12).ngClassPending),l(n,28,0,u.moment(u.today).add(1,"d").format("L"))}))}function F(l){return t.Jb(0,[(l()(),t.rb(0,0,null,null,1,"app-resale-confimration",[],null,null,null,T,z)),t.qb(1,114688,null,0,p,[x.b,b.a,s.Jb,s.Jb],null,null)],(function(l,n){l(n,1,0)}),null)}var R=t.nb("app-resale-confimration",p,F,{},{},[]);class S{}var E=u("6epx"),$=u("VqRL");u.d(n,"OrderDetailsPageModuleNgFactory",(function(){return j}));var j=t.ob(o,[],(function(l){return t.Ab([t.Bb(512,t.j,t.Z,[[8,[e.a,J,D.a,R]],[3,t.j],t.v]),t.Bb(4608,i.k,i.j,[t.s,[2,i.q]]),t.Bb(4608,h.r,h.r,[]),t.Bb(4608,s.c,s.c,[t.x,t.g]),t.Bb(4608,s.Jb,s.Jb,[s.c,t.j,t.p]),t.Bb(4608,s.Nb,s.Nb,[s.c,t.j,t.p]),t.Bb(4608,h.b,h.b,[]),t.Bb(1073742336,i.b,i.b,[]),t.Bb(1073742336,h.q,h.q,[]),t.Bb(1073742336,h.g,h.g,[]),t.Bb(1073742336,s.Fb,s.Fb,[]),t.Bb(1073742336,m.o,m.o,[[2,m.t],[2,m.m]]),t.Bb(1073742336,S,S,[]),t.Bb(1073742336,h.n,h.n,[]),t.Bb(1073742336,E.a,E.a,[]),t.Bb(1073742336,$.a,$.a,[]),t.Bb(1073742336,o,o,[]),t.Bb(1024,m.k,(function(){return[[{path:"",component:k}],[{path:"",component:f.a}]]}),[])])}))}}]);